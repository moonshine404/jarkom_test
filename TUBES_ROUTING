h1.cmd("ip rule add from 192.168.0.1")
h1.cmd("ip rule add from 192.168.7.1")
h1.cmd("ip route add 192.168.0.0/24 dev h1-eth0 scope link table 1")
h1.cmd("ip route add default via 192.168.0.2 dev h1-eth0 table 1")
h1.cmd("ip route add 192.168.7.0/24 dev h1-eth1 scope link table 2")
h1.cmd("ip route add default via 192.168.7.2 dev h1-eth1 table 2")
h1.cmd("ip route add default scope global nexthope via 192.168.0.2 dev h1-eth0")

h2.cmd("ip rule add from 192.168.3.1")
h2.cmd("ip rule add from 192.168.4.1")
h2.cmd("ip route add 192.168.3.0/24 dev h2-eth0 scope link table 3")
h2.cmd("ip route add default via 192.168.3.2 dev h2-eth0 table 3")
h2.cmd("ip route add 192.168.4.0/24 dev h1-eth1 scope link table 4")
h2.cmd("ip route add default via 192.168.4.2 dev h1-eth1 table 4")
h2.cmd("ip route add default scope global nexthope via 192.168.4.2 dev h2-eth1")

r1.cmd("route add -net 192.168.2.0/24 gw 192.168.1.2")
r1.cmd("route add -net 192.168.3.0/24 gw 192.168.1.2")
r1.cmd("route add -net 192.168.6.0/24 gw 192.168.5.1")
r1.cmd("route add -net 192.168.4.0/24 gw 192.168.5.1")
r1.cmd("route add -net 192.168.7.0/24 gw 192.168.5.1")

r2.cmd("route add -net 192.168.3.0/24 gw 192.168.2.1")
r2.cmd("route add -net 192.168.4.0/24 gw 192.168.6.1")
r2.cmd("route add -net 192.168.1.0/24 gw 192.168.2.1")
r2.cmd("route add -net 192.168.0.0/24 gw 192.168.2.1")
r2.cmd("route add -net 192.168.5.0/24 gw 192.168.6.1")

r3.cmd("route add -net 192.168.0.0/24 gw 192.168.1.1")
r3.cmd("route add -net 192.168.4.0/24 gw 192.168.2.2")
r3.cmd("route add -net 192.168.7.0/24 gw 192.168.2.2")
r3.cmd("route add -net 192.168.6.0/24 gw 192.168.2.2")
r3.cmd("route add -net 192.168.5.0/24 gw 192.168.1.1")

r4.cmd("route add -net 192.168.7.0/24 gw 192.168.6.2")
r4.cmd("route add -net 192.168.0.0/24 gw 192.168.5.2")
r4.cmd("route add -net 192.168.1.0/24 gw 192.168.5.2")
r4.cmd("route add -net 192.168.3.0/24 gw 192.168.5.2")
r4.cmd("route add -net 192.168.2.0/24 gw 192.168.6.2")
